<!--
  Generated template for the PassengerListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="page-header-custom bg_blue_alice">

    <ion-navbar>
        <ion-title>
            <div class="color_blue_midnight">
                PASSENGERS LIST
            </div>

        </ion-title>
    </ion-navbar>

</ion-header>


<ion-content>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText=""></ion-refresher-content>
    </ion-refresher>
    <ion-grid style="padding:0px;">
        <input type="text" id="rfRead" style="visibility:hidden;" />
        <ion-item class="search_box" padding>
            <ion-label margin>
                <i class="icon icon-Search"></i>
            </ion-label>
            <ion-input type="text" [(ngModel)]="searchInput" name="searchInput" (keyup)="searchPassengers($event)" placeholder="Search Passenger"></ion-input>

        </ion-item>
        <div *ngIf="passengers.length > 0">
            <ion-row>
                <ion-col col-12 class="h7percent bg_blue_royal txt_center txt_white pd4percent f-size-15px">
                    PASSENGERS
                </ion-col>
            </ion-row>
            <ion-row justify-content-center class="margin-top-1 txt_white txt_center">
                <ion-col col-2 class="h7percent padding-vertical-2-2 margin-half-1 passenger-box-primary">
                    <span class="txt_center">{{listTodo.waitBus}}</span>
                </ion-col>
                <ion-col col-2 class="h7percent padding-vertical-2-2 margin-half-1 passenger-box-secondary">
                    <span class="txt_center">{{listTodo.waitAlign}}</span>
                </ion-col>
                <ion-col col-2 class="h7percent padding-vertical-2-2 margin-half-1 passenger-box-third">
                    <span class="txt_center">{{listTodo.availableOnBus}}</span>
                </ion-col>
                <ion-col col-2 class="h7percent padding-vertical-2-2  margin-half-1 passenger-box-fourth">
                    <span class="txt_center">{{listTodo.aligned}}</span>
                </ion-col>
            </ion-row>
            <br/>
            <ion-row *ngFor="let passenger of passengers;let i = index" class="passenger-list" (click)="openModal(passenger,false)">
                <ion-col col-4 align-self-center [class]="generateStatusColor(passenger.status,passenger.pickup)">
                    <img [src]="passenger.photo" class="avatar-img">
                </ion-col>
                <ion-col col-8 align-self-center>
                    <div>{{passenger.first_name}} {{passenger.surname}}</div>
                </ion-col>
            </ion-row>
        </div>
    </ion-grid>
</ion-content>

<modal id="passenger-item">
    <div class="modal">
        <div class="modal-body">
            <ion-grid no-padding>
                <ion-row justify-content-between class="modal-title">
                    <div>PASSENGER INFO</div>
                    <ion-icon ios="md-close" md="md-close" (click)="closeModal()"></ion-icon>
                </ion-row>
                <ion-row>
                    <div style="position:relative;width:100%;">
                        <img [src]="passengerItem.photo" class="modal-picture" />
                        <div [class]="generateCircleColor(passengerItem.status,passengerItem.pickup)"></div>
                    </div>
                </ion-row>
                <ion-row>
                    <ion-grid style="padding:10px;">
                        <ion-row class="margin-top-3">
                            <div><b>Name</b>: {{passengerItem.first_name}} {{passengerItem.surname}}</div>
                        </ion-row>
                        <ion-row class="margin-top-3">
                            <button ion-button block [disabled]="viewinstructors" [color]="colorViewInstructors">VIEW SPECIAL INSTRUTORS</button>
                        </ion-row>
                        <ion-row class="margin-top-1">
                            <button ion-button block color="primary">ADD NOTE</button>
                        </ion-row>
                        <ion-row class="margin-top-1">
                            <button ion-button block [disabled]="viewForceLogin" [color]="colorViewForceLogin" (click)="forceLogin(passengerItem)">FORCE LOGIN</button>
                        </ion-row>
                    </ion-grid>
                </ion-row>
            </ion-grid>
        </div>
    </div>
    <div class="modal-background"></div>
</modal>